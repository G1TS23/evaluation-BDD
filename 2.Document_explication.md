
## Membres du groupe
Nom/prénom : Olivier Falahi
Nom/prénom : Tanguy Pisano

---

### 1. Présentation du Projet

Décrivez votre application en 3-5 phrases : problématique, objectif et fonctionnalités principales.

Site de publications d'articles, avec possibilité de commenter les articles. Il faut être utilisateur pour commenter et écrire.
Les utilisateurs et articles sont stockés sur une DB PostgreSQL et les 5 derniers articles publiés ainsi que les commentaires sont stockés sur une DB MongoDB.

### 2. Architecture PostgreSQL (Méthode Merise)

**MCD (Modèle Conceptuel de Données)**

```
USER (1,N) - écrit - (1,1) ARTICLE

```

**MLD (Modèle Logique de Données)**

```
USER (id_user, firstname, lastname, email, password, nb_article, created_at)
ARTICLE (id_article, title, description, content, id_user, created_at)
```

**MPD (Modèle Physique de Données)**

```sql
CREATE TABLE users (
    id_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    firstname TEXT NOT NULL,
    lastname TEXT NOT NULL,
    email email UNIQUE NOT NULL,
    password TEXT NOT NULL,
    nb_article INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE articles (
    id_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    content TEXT NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    id_user INTEGER NOT NULL,
    CONSTRAINT fk_id_user FOREIGN KEY (id_user) REFERENCES users (id_user)
)
```

### 3. Architecture MongoDB

```json
// Exemple de structure de vos documents
```

### 4. Justification des Choix Techniques

- **Répartition des données** : Quelles données en PostgreSQL ? Quelles données en MongoDB ? Pourquoi ?
Les utilisateurs et les articles sont stockés sur postgre pour garantir une meilleure persistence des données, ces deux tables étant essentielles au trafic du site.
Les 5 derniers articles et les commentaires sont stockés sur MongoDB pour avoir un accès rapide à ceux ci. 
- **Modélisation MongoDB** : Documents imbriqués ou références ? Justification
Les commentaires sont mixés entre imbriqués et référencés pour avoir les derniers commentaires rapidement mais éviter une surcharge du fichier a cause d'un trop grand nombre de commentaires. 
- **Relations inter-bases** : Comment les deux bases communiquent-elles ?


### 5. Exemples de Requêtes Complexes

**PostgreSQL**

```sql
-- Exemple de requête avec jointure et agrégat
-- Nombre articles par mois par utilisateur
-- Tous les articles d'un user
```

**MongoDB**

```javascript
// Exemple de pipeline d'agrégation
// Recuperer tous les commentaires d'un article
```

### 6. Stratégie de Sauvegarde
Pour cette partie, vous devez effectuer des recherches afin d'argumenter vos réponses.

- **PostgreSQL** : Méthode proposée (pg_dump, sauvegarde continue, etc.)

- **MongoDB** : Méthode proposée (mongodump, replica set, etc.)

- **Fréquence** : Complète, incrémentale, différentielle

- **Restauration** : Procédure en cas de perte de données
